<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Databaseontwikkeling - Les 2</title>

    <meta name="description" content="Slides voor het vak database ontwikkeling. Gegeven op Novi Hogeschool">
    <meta name="author" content="Nick Stuivenberg">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="../../../../dist/reset.css">
    <link rel="stylesheet" href="../../../../dist/reveal.css">
    <link rel="stylesheet" href="../../../../dist/theme/white.css" id="theme">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="../../../../plugin/highlight/monokai.css" id="highlight-theme">

    <!-- kleuren:
    #f5f1b5
    #b5533c
    #4d7e65
    #002b36 -->
    <!--
    pdf
    decktape -s 1920x1080  automatic http://localhost:8000/curriculum/frontend/webdevelopment/slides/4.html#/ 4.pdf
    -->
    <style>
        .container{
            display: flex;
        }
        .col{
            flex: 1;
        }
    </style>

</head>
<body>

<div class="reveal">
    <div class="slides">
        <section>
        <section>
            <h1>Database Ontwikkeling</h1>
            <p>Les 2 - Onderwerp</p>
            <aside class="notes">
                Notes can be added here
            </aside>
        </section>
            <section>
                <h2>Inhoud</h2>
                <ul>
                    <li>Huiswerk bespreken - 1</li>
                    <li>Constraints</li>
                    <li>Lesopdracht</li>
                    <li>Huiswerk bespreken - 2</li>
                    <li>Insert, Update, Delete</li>
                    <li>Huiswerk bespreken - 3</li>
                    <li>Select - vervolg</li>
                </ul>
            </section>
            <section>
                <h3>Huiswerk bespreken - 1</h3>
                <h5>Select opdrachten</h5>
            </section>
        </section>

        <section>
            <section>
                <h2>Constraints</h2>
                <h5>Beperkingsregels</h5>
            </section>
            <section>
                <h3>NOT NULL</h3>
                <p>Je kunt aangeven dat een kolom niet leeg mag zijn</p>
                <pre><code class="sql" data-trim data-line-numbers>
                    CREATE TABLE orders(
                        ord_no integer NOT NULL,
                        ord_date date NOT NULL,
                        item_name character(35),
                        item_grade character(1),
                        ord_qty numeric NOT NULL,
                        ord_amount numeric
                    );
                </code></pre>
            </section>
            <section>
                <h3>UNIQUE</h3>
                <p>Een waarde mag maar één keer voorkomen</p>
                <pre><code class="sql" data-trim data-line-numbers>
                CREATE TABLE orders(
                    ord_no integer UNIQUE,
                    ord_date date,
                    item_name character(35),
                    item_grade character(1),
                    ord_qty numeric,
                    ord_amount numeric
                );
                </code></pre>
            </section>
            <section data-auto-animate>
                <h3>CHECK</h3>
                <p>De database checks laten uitvoeren</p>
                <pre><code class="sql" data-trim data-line-numbers>
                    CREATE TABLE orders(
                        ord_no integer,
                        ord_date date,
                        item_name character(35),
                        item_grade character(1),
                        ord_qty numeric,
                        ord_amount numeric CHECK (ord_amount>0)
                    );
                </code></pre>
            </section>
            <section data-auto-animate>
                <h3>CHECK</h3>
                <p>De database checks laten uitvoeren</p>
                <h5>GEBRUIK DIT NIET</h5>
            </section>
            <section>
                <h3>PRIMARY KEY</h3>
                <p>Wat was dat ook alweer?</p>
                <pre><code class="sql" data-trim data-line-numbers>
                CREATE TABLE orders(
                    ord_no integer,
                    ord_date date,
                    item_name character(35),
                    item_grade character(1),
                    ord_qty numeric,
                    ord_amount numeric,
                    PRIMARY KEY (ord_no,item_name)
                );
                </code></pre>
            </section>
            <section>
                <h3>FOREIGN KEY</h3>
                <p>En wat was dit ook alweer?</p>
                <pre><code class="sql" data-trim data-line-numbers>
                CREATE TABLE orders(
                    ord_no integer PRIMARY KEY,
                    ord_date date,
                    item_code integer REFERENCES items,item_grade character(1),
                    ord_qty numeric,
                    ord_amount numeric
                );
                </code></pre>
            </section>
            <section>
                <h3>FOREIGN KEY</h3>
                <p>Achteraf toevoegen</p>
                <pre><code class="sql" data-trim data-line-numbers>
                    alter table tblFactuurRegel
                    add foreign key (Factuurnr) references tblFactuur(Factuurnr);
                </code></pre>
            </section>
            <section>
                <h3>FK: On delete restrict</h3>
                <p>Mag pas verwijderd worden als er geen verwijzingen zijn.</p>
                <pre><code class="sql" data-trim data-line-numbers>
                CREATE TABLE order_items (
                product_no integer REFERENCES products ON DELETE RESTRICT,
                order_id integer REFERENCES orders ON DELETE CASCADE,
                quantity integer,
                PRIMARY KEY (product_no, order_id)
                );
                </code></pre>
            </section>
            <section>
                <h3>FK: On delete cascade</h3>
                <p>Alle referenties worden ook verwijderd.</p>
                <pre><code class="sql" data-trim data-line-numbers>
                CREATE TABLE order_items (
                product_no integer REFERENCES products ON DELETE RESTRICT,
                order_id integer REFERENCES orders ON DELETE CASCADE,
                quantity integer,
                PRIMARY KEY (product_no, order_id)
                );
                </code></pre>
            </section>
            <section>
                <h3>FK: On delete SET DEFAULT, SET NULL</h3>
                <pre><code class="sql" data-trim data-line-numbers>
                CREATE TABLE order_items (
                product_no integer DEFAULT 0
                    REFERENCES products ON DELETE SET DEFAULT,

                order_id integer REFERENCES orders ON DELETE SET NULL,
                quantity integer,
                PRIMARY KEY (product_no, order_id)
                );
                </code></pre>
            </section>
            <section>
                <h2>Lesopdrachtje</h2>
                <img src="img/UML-class.png" alt="UML">
            </section>
        </section>
        <section>
            <h3>Huiswerk bespreken - 2</h3>
            <h5>Edhub H3.4: 1</h5>
        </section>
        <section>
            <section>
                <h2>Insert, Update, Delete</h2>
            </section>
            <section>
                <h3>Insert</h3>
                <p>Voeg aan tabel toe</p>
                <pre><code class="sql" data-trim data-line-numbers>
                INSERT INTO films (code, title, did, date_prod, kind)
                VALUES ('T_601', 'Yojimbo', 106, '1961-06-16', 'Drama');
                </code></pre>
                <pre><code class="sql" data-trim data-line-numbers>
                INSERT INTO films
                VALUES ('T_601', 'Yojimbo', 106, '1961-06-16', 'Drama');
                </code></pre>
                <pre><code class="sql" data-trim data-line-numbers>
                INSERT INTO films (code, title, did, date_prod, kind)
                VALUES ('T_601', 'Yojimbo', 106, DEFAULT, 'Drama');
                </code></pre>
            </section>
            <section>
                <h3>Update</h3>
                <p>Update rij(en) in tabel</p>
                <pre><code class="sql" data-trim data-line-numbers>
                UPDATE films SET kind = 'Dramatic' WHERE kind = 'Drama';
                </code></pre>
                <pre><code class="sql" data-trim data-line-numbers>
                UPDATE films SET kind = 'Dramatic';
                </code></pre>
                <pre><code class="sql" data-trim data-line-numbers>
                UPDATE films SET kind = 'Fantasy'
                WHERE code = 'T_601';
                </code></pre>
            </section>
            <section>
                <h3>Delete</h3>
                <p>Verwijder rij(en) in tabel</p>
                <pre><code class="sql" data-trim data-line-numbers>
                DELETE FROM films;
                </code></pre>
                <pre><code class="sql" data-trim data-line-numbers>
                DELETE FROM films
                WHERE code = 'T_601';
                </code></pre>
            </section>
        </section>
        <section>
            <section>
                <h2>Select - vervolg</h2>
                <ul>
                    <li>DISTINCT</li>
                    <li>ORDER BY</li>
                    <li>GROUP BY</li>
                </ul>
            </section>
            <section>
                <h3>DISTINCT</h3>
                <p>Geeft alleen unieke (distinct) waardes terug.</p>
                <div class="container">
                    <div class="col">
                    <pre><code class="sql" data-trim data-line-numbers style="font-size: small; line-height: normal">
                        SELECT Country FROM Customers;
                    </code></pre>
                    </div>
                    <div class="col">
                        <img src="img/country_not_distinct.png" alt="not distinct example">
                    </div>
                </div>
                <div class="container">
                    <div class="col">
                    <pre><code class="sql" data-trim data-line-numbers style="font-size: small; line-height: normal">
                        SELECT DISTINCT Country FROM Customers;
                    </code></pre>
                    </div>
                    <div class="col">
                        <img src="img/countryu_distinct.png" alt="Country distinct example">
                    </div>
                </div>
            </section>
            <section>
                <h3>Distinct</h3>
                <p>Unieke waardes tellen</p>
                <pre><code class="sql" data-trim data-line-numbers>
                        SELECT COUNT(DISTINCT Country) FROM Customers;
                    </code></pre>
            </section>
            <section>
                <h3>ORDER BY</h3>
                <pre><code class="sql" data-trim data-line-numbers>
                SELECT * FROM Customers
                ORDER BY Country;
                </code></pre>
                <pre><code class="sql" data-trim data-line-numbers>
                SELECT * FROM Customers
                ORDER BY Country DESC;
                </code></pre>
            </section>
            <section>
                <h3>GROUP BY</h3>
                <p>Groepeert waardes in zogenaamde samenvattende rijen. Bijvoorbeeld het aantal gebruikers per land.</p>
                <p>Wordt vaak gebruikt samen met COUNT, MAX, MIN, SUM en AVG.</p>
                <pre><code class="sql" data-trim data-line-numbers>
                SELECT COUNT(CustomerID), Country
                FROM Customers
                GROUP BY Country;
                </code></pre>
                <pre><code class="sql" data-trim data-line-numbers>
                SELECT COUNT(CustomerID), Country
                FROM Customers
                GROUP BY Country
                ORDER BY COUNT(CustomerID) DESC;
                </code></pre>
            </section>
            <section>
                <h3>Huiswerk bespreken - 3</h3>
                <h5>Edhub: H7</h5>
            </section>
        </section>


    </div>
</div>

<script src="../../../../dist/reveal.js"></script>
<script src="../../../../plugin/zoom/zoom.js"></script>
<script src="../../../../plugin/notes/notes.js"></script>
<script src="../../../../plugin/search/search.js"></script>
<script src="../../../../plugin/markdown/markdown.js"></script>
<script src="../../../../plugin/highlight/highlight.js"></script>
<script>

    // Also available as an ES module, see:
    // https://revealjs.com/initialization/
    Reveal.initialize({
        controls: true,
        progress: true,
        center: true,
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [ RevealZoom, RevealNotes, RevealSearch, RevealMarkdown, RevealHighlight ]
    });

</script>
</body>
</html>